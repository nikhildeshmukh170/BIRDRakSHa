import React, { useEffect, useState } from 'react';

const UserProfilePanel = () => {
  const [joinCount, setJoinCount] = useState(0); // Default to 0 initially
  const profiles = [
    { id: 1, imgSrc: 'data:image/jpeg;base64,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', name: 'User 1' },
    { id: 2, imgSrc: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTvJaoIeJQU_V9rL_ZII61whWyqSFbmMgTgwQ&s', name: 'User 2' },
    { id: 3, imgSrc: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRy60EbYNRbgIV59YZz_PHcJwkPSwq0SOaS907AxOCs7lebyJqRXl4-ho8ouFkPrLSJ0bY&usqp=CAU', name: 'User 3' },
    { id: 4, imgSrc: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRV4tIuoNNOq5dMhxo-8dG2bBvRgBEpUeaAVngu_YSjvxnlH7TXS_zlAIVf5R1cqdtcXdQ&usqp=CAU', name: 'User 4' },
  ];

  useEffect(() => {
    // Load join count from local storage when the component mounts
    const storedCount = localStorage.getItem('joinCount');
    if (storedCount) {
      setJoinCount(parseInt(storedCount, 10));
    }
  }, []);

  const handleJoin = () => {
    const newCount = joinCount + 1;
    setJoinCount(newCount);

    // Save the updated count to local storage
    localStorage.setItem('joinCount', newCount);
    alert('Thank you for joining!');
  };

  return (
    <div className="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-600 bg-opacity-75 text-white rounded-full border-2 border-green-700 shadow-lg flex items-center p-4 px-6 max-w-md w-full">
      {/* Stacked Profile Images */}
      <div className="flex -space-x-3">
        {profiles.map((profile) => (
          <img
            key={profile.id}
            src={profile.imgSrc}
            alt={profile.name}
            className="w-10 h-10 rounded-full border-2 border-white"
          />
        ))}
      </div>

      {/* Join Section with Join Count */}
      <div className="ml-4 flex-1">
        <h2 className="text-lg font-semibold leading-tight">Join Us</h2>
        <p className="text-sm leading-tight">Currently joined: {joinCount} people</p>
      </div>

      {/* Join Button */}
      <button
        className="ml-auto bg-white text-green-600 rounded-full p-2 px-4 font-medium hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-400"
        onClick={handleJoin}
      >
        Join
      </button>
    </div>
  );
};

export default UserProfilePanel;
